renv::install("DT")
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
keyboardShortcutAddin:::cd_to_parent_dir()
keyboardShortcutAddin:::cd_to_sub()
cd("./draft")
create_project("SHINY_DT_table_selection")
file.edit("Apps/draft/SHINY_DT_table_selection/")
setwd("Apps/draft/SHINY_DT_table_selection/")
file.edit("app.R")
shiny::runApp()
proj_switch()
shiny::runApp()
iris
shiny::runApp()
data;:iris
data;:iris()
data;:iris
iris
letters
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
file.edit("tests/interactive/monthly_activity.R")
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
proj_switch()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
file.edit("app/logic/db_utils.R")
shiny::runApp()
shiny::runApp()
shiny::runApp()
nature
nature()
most_recent_period(nature())
shiny::runApp()
most_recent_period(nature())
shiny::runApp()
most_recent_period(nature())
shiny::runApp()
shiny::runApp()
(
tbl(db_instant_connect(nature()), "t1d2cmr_1")
|> filter(ipe == finess)
|> mutate(cmd     = substr(racine, 1, 2),
cas     = substr(racine, 3, 3),
effh    = as.integer(effh),
annee   = as.integer(annee),
periode = as.integer(periode))
|> filter(annee == year, periode == period)
|> select(ipe, cmd, cas, effh)
|> collect()
|> group_by(ipe, cmd, cas)
|> summarise(N = sum(effh))
)
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
ghms()
input$cmd_rows_selected
ghms()
input$cmd_rows_selected
input$cmd_rows_selected
shiny::runApp()
shiny::runApp()
cmd_list()
cmd_list()[input$cmd_rows_selected]
input$cmd_rows_selected
cmd_list() |> pull()
cmd_list() |> dplyr::pull()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
ghm_etab_year_period(finess,
most_recent_year(nature()),
most_recent_period(nature()))
shiny::runApp()
ghm_etab_year_period(finess,
most_recent_year(nature()),
most_recent_period(nature()))
shiny::runApp()
bind_rows(
ghm_etab_year_period(finess,
most_recent_year(nature() - 1),
most_recent_period(nature()))
,
ghm_etab_year_period(finess,
most_recent_year(nature()),
most_recent_period(nature()))
)
dplyr::bind_rows(
ghm_etab_year_period(finess,
most_recent_year(nature() - 1),
most_recent_period(nature()))
,
ghm_etab_year_period(finess,
most_recent_year(nature()),
most_recent_period(nature()))
)
ghm_etab_year_period(finess,
most_recent_year(nature() - 1),
most_recent_period(nature()))
ghm_etab_year_period(finess,
most_recent_year(nature()),
most_recent_period(nature()))
dplyr::bind_rows(
ghm_etab_year_period(finess,
most_recent_year(nature()) - 1,
most_recent_period(nature()))
,
ghm_etab_year_period(finess,
most_recent_year(nature()),
most_recent_period(nature()))
)
most_recent_year(nature())
bind_rows(
ghm_etab_year_period(finess,
as.character(as.integer(
most_recent_year(nature())) - 1),
most_recent_period(nature()))
,
ghm_etab_year_period(finess,
most_recent_year(nature()),
most_recent_period(nature()))
)
shiny::runApp()
bind_rows(
ghm_etab_year_period(finess,
as.character(as.integer(
most_recent_year(nature())) - 1),
most_recent_period(nature()))
,
ghm_etab_year_period(finess,
most_recent_year(nature()),
most_recent_period(nature()))
)
bind_rows(
ghm_etab_year_period(finess,
as.character(as.integer(
most_recent_year(nature())) - 1),
most_recent_period(nature()))
,
ghm_etab_year_period(finess,
most_recent_year(nature()),
most_recent_period(nature()))
)
shiny::runApp()
bind_rows(
ghm_etab_year_period(finess,
as.character(as.integer(
most_recent_year(nature())) - 1),
most_recent_period(nature()))
,
ghm_etab_year_period(finess,
most_recent_year(nature()),
most_recent_period(nature()))
)
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
(
ghms()
|> filter(cmd %in% selected_cmd())
|> filter(cas %in% selected_cas())
)
ghms()
shiny::runApp()
ghms()
ghms() |> pinf()
ghms() |> console::pinf()
ghms() |> consoleR::pinf()
Q
shiny::runApp()
shiny::runApp()
ghms()
ghms() |> consoleR::pinf()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
last_year <- ghm_etab_year_period(nature, finess,
most_recent_year(nature()) - 1,
most_recent_period(nature()))
shiny::runApp()
last_year <- ghm_etab_year_period(finess,
most_recent_year(nature()) - 1,
most_recent_period(nature()))
shiny::runApp()
last_year <- ghm_etab_year_period(finess,
most_recent_year(nature()) - 1,
most_recent_period(nature()))
box::use(
app/logic/db_utils
[  most_recent_year, most_recent_period, ],
app/logic/nature_utils
[ nature, ],
dplyr
[ bind_rows, filter, mutate, ],
ggplot2
[ aes, annotate, expand_limits, geom_point, geom_smooth, ggplot, ],
)
last_year <- ghm_etab_year_period(finess,
most_recent_year(nature()) - 1,
most_recent_period(nature()))
last_year <- ghm_etab_year_period(finess,
most_recent_year(nature()) - 1,
most_recent_period(nature()))
last_year <- ghm_etab_year_period(finess,
as.character(as.integer(
most_recent_year(nature())) - 1),
most_recent_period(nature()))
last_year
last_year |> consoleR::pinf()
this_year <- ghm_etab_year_period(finess,
most_recent_year(nature()),
most_recent_period(nature()))
evolution <- function(last_year, this_year) {
last_month_total <- function(year) {
year[nrow(year), "Total"]
}
(
(last_month_total(this_year) - last_month_total(last_year))
/
last_month_total(this_year)
) -> result
prefixe <- ifelse(result$Total >= 0, "+", "")
paste0(prefixe, scales::percent_format(accuracy = .1)(result$Total))
}
(
bind_rows(last_year, this_year)
|> mutate(periode = as.integer(periode))
|> filter(cmd %in% selected_cmd)
|> filter(cas %in% selected_cas)
|> ggplot(aes(periode, Total, color = annee))
+  geom_point()
+  geom_smooth(method = "lm")
+  expand_limits(y = 0)
+  annotate("text",
x = - Inf,
y = - Inf,
label = evolution(last_year, this_year),
vjust = -6,
hjust = -6.5,
size = 10)
)
|> filter(cas %in% selected_cas)
(
)
(
)
(
bind_rows(last_year, this_year)
|> mutate(periode = as.integer(periode))
|> filter(cmd %in% selected_cmd)
|> filter(cas %in% selected_cas)
# |> ggplot(aes(periode, Total, color = annee))
# +  geom_point()
# +  geom_smooth(method = "lm")
# +  expand_limits(y = 0)
# +  annotate("text",
#             x = - Inf,
#             y = - Inf,
#             label = evolution(last_year, this_year),
#             vjust = -6,
#             hjust = -6.5,
#             size = 10)
)
selected_cas
selected_cmd
selected_cas
selected_cmd
shiny::runApp()
selected_cas
(
bind_rows(last_year, this_year)
|> mutate(periode = as.integer(periode))
|> filter(cmd %in% selected_cmd)
|> filter(cas %in% selected_cas)
# |> ggplot(aes(periode, Total, color = annee))
# +  geom_point()
# +  geom_smooth(method = "lm")
# +  expand_limits(y = 0)
# +  annotate("text",
#             x = - Inf,
#             y = - Inf,
#             label = evolution(last_year, this_year),
#             vjust = -6,
#             hjust = -6.5,
#             size = 10)
)
(
bind_rows(last_year, this_year)
|> mutate(periode = as.integer(periode))
|> filter(cmd %in% selected_cmd)
|> filter(cas %in% selected_cas)
# |> ggplot(aes(periode, Total, color = annee))
# +  geom_point()
# +  geom_smooth(method = "lm")
# +  expand_limits(y = 0)
# +  annotate("text",
#             x = - Inf,
#             y = - Inf,
#             label = evolution(last_year, this_year),
#             vjust = -6,
#             hjust = -6.5,
#             size = 10)
)
(
bind_rows(last_year, this_year)
|> mutate(periode = as.integer(periode))
|> filter(cmd %in% selected_cmd)
|> filter(cas %in% selected_cas)
|> ggplot(aes(periode, N, color = annee))
# +  geom_point()
# +  geom_smooth(method = "lm")
# +  expand_limits(y = 0)
# +  annotate("text",
#             x = - Inf,
#             y = - Inf,
#             label = evolution(last_year, this_year),
#             vjust = -6,
#             hjust = -6.5,
#             size = 10)
)
(
bind_rows(last_year, this_year)
|> mutate(periode = as.integer(periode))
|> filter(cmd %in% selected_cmd)
|> filter(cas %in% selected_cas)
|> ggplot(aes(periode, N, color = annee))
# +  geom_point()
# +  geom_smooth(method = "lm")
# +  expand_limits(y = 0)
# +  annotate("text",
#             x = - Inf,
#             y = - Inf,
#             label = evolution(last_year, this_year),
#             vjust = -6,
#             hjust = -6.5,
#             size = 10)
)
(
bind_rows(last_year, this_year)
|> mutate(periode = as.integer(periode))
|> filter(cmd %in% selected_cmd)
|> filter(cas %in% selected_cas)
|> ggplot(aes(periode, N, color = annee))
+  geom_point()
# +  geom_smooth(method = "lm")
# +  expand_limits(y = 0)
# +  annotate("text",
#             x = - Inf,
#             y = - Inf,
#             label = evolution(last_year, this_year),
#             vjust = -6,
#             hjust = -6.5,
#             size = 10)
)
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
file.edit("app/logic/monthly_activity.R")
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
(
bind_rows(last_year, this_year))
(
bind_rows(last_year, this_year)) |> consoleR::pinf()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
last_month_total(this_year)
this_year
this_year |> filter(periode == 1)
most_recent_period(nature())
this_year |> filter(periode == most_recent_period(nature()))
(
bind_rows(last_year, this_year)
most_recent_period(nature())
shiny::runApp()
this_year]
this_year
this_year |> filter(periode == most_recent_period(nature())) |> as.integer())
this_year |> filter(periode == most_recent_period(nature()) |> as.integer())
shiny::runApp()
this_year
last_year
most_recent_period(nature())
most_recent_period(nature()) |> as.integer()
shiny::runApp()
shiny::runApp()
(
year
|> filter(periode == the_period))
(
year
|> filter(periode == the_period)
|> summarise(N = sum(N))
|> pull(N)
)
(
year
|> filter(periode == the_period)
|> summarise(N = sum(N))
# |> pull(N)
)
(
year
|> filter(periode == the_period)
|> group_by(annee, period)
|> summarise(N = sum(N))
# |> pull(N)
)
(
year
|> filter(periode == the_period)
|> group_by(annee, periode)
|> summarise(N = sum(N))
# |> pull(N)
)
(
year
|> filter(periode == the_period)
|> group_by(annee, periode)
|> summarise(N = sum(N))
|> pull(N)
)
shiny::runApp()
Q
shiny::runApp()
shiny::runApp()
last_month_total(this_year)
last_month_total(last_year)
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
/dom
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
keyboardShortcutAddin:::cd_to_sub()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
shiny::runApp()
keyboardShortcutAddin:::cd_to_parent_dir()
keyboardShortcutAddin:::cd_to_sub()
cd("./draft/")
create_project("SO_unselect_DT_rows")
